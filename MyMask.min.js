const numberMask=({form:e,input:a,always:s=!1})=>{let t={mask:"+7 (___) ___-__-__",lastNumber:""},m=e.querySelector(a);m.value=s?t.mask:"",m.addEventListener("focus",e=>{e.target.value=t.mask}),m.addEventListener("click",e=>{e.target.setSelectionRange(t.mask.indexOf("_"),t.mask.indexOf("_"))}),m.addEventListener("keydown",e=>{if("Backspace"==e.key&&"("!=t.lastNumber){e.preventDefault(),t.mask=t.mask.split("");var a=t.mask.lastIndexOf(t.lastNumber);for(let e=a-1;0<e&&(t.lastNumber=t.mask[e],"-"==t.lastNumber||" "==t.lastNumber||")"==t.lastNumber);e--);t.mask[a]="_",t.mask=t.mask.join("")}else null!=e.key&&RegExp(/_/).test(t.mask)&&""!=e.key.replace(/([^\d]|\,)/gi,"")&&(t.mask=t.mask.replace(/_/,e.key),t.lastNumber=e.key);setTimeout(()=>{e.target.value=t.mask,e.target.setSelectionRange(t.mask.indexOf("_"),t.mask.indexOf("_"))})}),e.addEventListener("submit",()=>{t.mask="+7 (___) ___-__-__"})};export{numberMask};
